        private void timer_start_Tick(object sender, EventArgs e)
        {
            int billmax1;
            

           
            billmax1 = BillMax + 1;
            txtBill.Text = Convert.ToString(billmax1);
            try
            {
                _conn = new MySqlConnection(connlocalhost);
                _conn.Open();
                if (!string.IsNullOrEmpty(Convert.ToString(billmax1)))
                {
                    string DATE_TIME = DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss");
                    double REAL_STRAIN = Convert.ToDouble(tbx_strain.Text.ToString());
                    double REAL_FORCE = Convert.ToDouble(txt_Force.Text.ToString());
                    double REAL_STRESS = Convert.ToDouble(txt_Stress.Text.ToString());
                    double REAL_ELONG = Convert.ToDouble(txt_Elong.Text.ToString());
                    string query_send = "insert into phieutest(BILL_NUMBER,DATE_TIME,REAL_STRAIN,REAL_FORCE,REAL_STRESS,REAL_ELONG) values" + "(@BILL_NUMBER,@DATE_TIME,@REAL_STRAIN,@REAL_FORCE,@REAL_STRESS,@REAL_ELONG)";
                    cmdsend = new MySqlCommand(query_send, _conn);
                    cmdsend.Parameters.AddWithValue("BILL_NUMBER", billmax1);
                    cmdsend.Parameters.AddWithValue("DATE_TIME", DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss"));
                    cmdsend.Parameters.AddWithValue("REAL_STRAIN", REAL_STRAIN);
                    cmdsend.Parameters.AddWithValue("REAL_FORCE", REAL_FORCE);
                    cmdsend.Parameters.AddWithValue("REAL_STRESS", REAL_STRESS);
                    cmdsend.Parameters.AddWithValue("REAL_ELONG", REAL_ELONG);


                    cmdsend.ExecuteNonQuery();
                    _conn.Close();

                }
            }
            catch (MySqlException ex)
            {
                MessageBox.Show("Lỗi1" + ex.Message);
            }
            try
            {
                
                
                    _conn = new MySqlConnection(connlocalhost);
                    _conn.Open();
                    string query = "select  * from phieutest where BIll_NUMBER = '" + billmax1 + "'";
                    dtp = new MySqlDataAdapter(query, connlocalhost);
                    cmd = new MySqlCommandBuilder(dtp);
                    DataTable tam1 = new DataTable();
                    dtp.Fill(tam1);
                    _conn.Close();
                    txt_Strain_max.Text = string.Format("{0:#,#0.0}", Convert.ToString(tam1.AsEnumerable().Max(row => row["REAL_STRAIN"])));
                    txt_Force_max.Text = string.Format("{0:#,#0.0}", Convert.ToString(tam1.AsEnumerable().Max(row => row["REAL_FORCE"])));
                    txt_Elong_max.Text = string.Format("{0:#,##0.00}", Convert.ToString(tam1.AsEnumerable().Max(row => row["REAL_ELONG"])));
                    txt_Stress_max.Text = string.Format("{0:#,#0.0}", Convert.ToString(tam1.AsEnumerable().Max(row => row["REAL_STRESS"])));
                    // Force_chart = Convert.ToDouble(txt_Force_max.Text);
                    // Strain_chart = Convert.ToDouble(txt_Strain_max.Text);
                    // WriteItems.SetValue(Convert.ToDouble(txt_Force_max.Text), 71);
                    //  PLC.SyncWrite(tagNumber, ref tagHandles, ref WriteItems, out OPCError);

                    tam1.Clear();
            }
            catch (MySqlException ex)
            {
                MessageBox.Show("Lỗi2 không tìm được giá trị max trong phiếu '" + billmax1 + "' " + ex.Message);
            }

            FillChart();
        }
